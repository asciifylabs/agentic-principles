#!/bin/bash
# Git post-merge hook - Fetch coding principles after merge/pull
# This hook runs automatically after git merge or git pull

# Find the fetch-principles.sh script
SCRIPT_DIR="$(dirname "$0")"
FETCH_SCRIPT=""

# Try multiple locations
for path in \
  "$SCRIPT_DIR/fetch-principles.sh" \
  "$SCRIPT_DIR/../fetch-principles.sh" \
  "$SCRIPT_DIR/../../hooks/fetch-principles.sh"; do
  if [ -f "$path" ]; then
    FETCH_SCRIPT="$path"
    break
  fi
done

# Run fetch-principles.sh in background if found
if [ -n "$FETCH_SCRIPT" ] && [ -f "$FETCH_SCRIPT" ]; then
  bash "$FETCH_SCRIPT" &>/dev/null &
fi

# Chain to original hook if backed up
if [ -f "$0.backup-original" ]; then
  exec "$0.backup-original" "$@"
fi
